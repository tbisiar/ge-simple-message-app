#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const authStack_1 = require("../lib/authStack");
const fileStorageStack_1 = require("../lib/fileStorageStack");
const databaseStack_1 = require("../lib/databaseStack");
const apiStack_1 = require("../lib/apiStack");
const app = new cdk.App();
const databaseStack = new databaseStack_1.DatabaseStack(app, 'DatabaseStack', {});
const authStack = new authStack_1.AuthStack(app, 'AuthStack', {
    stage: 'dev',
    hasCognitoGroups: true,
    groupNames: ['admin'],
    userpoolConstructName: 'ChatUserPool',
    identitypoolConstructName: 'ChatIdentityPool',
    userTable: databaseStack.userTable,
});
const fileStorageStack = new fileStorageStack_1.FileStorageStack(app, 'FileStorageStack', {
    authenticatedRole: authStack.authenticatedRole,
    unauthenticatedRole: authStack.unauthenticatedRole,
    allowedOrigins: ['http://localhost:3000'],
});
const apiStack = new apiStack_1.APIStack(app, 'AppSyncAPIStack', {
    userpool: authStack.userpool,
    roomTable: databaseStack.roomTable,
    messageTable: databaseStack.messageTable,
    userTable: databaseStack.userTable,
    unauthenticatedRole: authStack.unauthenticatedRole,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbkJhY2tlbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtYWluQmFja2VuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBb0M7QUFDcEMsbUNBQWtDO0FBQ2xDLGdEQUE0QztBQUM1Qyw4REFBMEQ7QUFDMUQsd0RBQW9EO0FBQ3BELDhDQUEwQztBQUUxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUV6QixNQUFNLGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUMsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUVqRSxNQUFNLFNBQVMsR0FBRyxJQUFJLHFCQUFTLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRTtJQUNqRCxLQUFLLEVBQUUsS0FBSztJQUNaLGdCQUFnQixFQUFFLElBQUk7SUFDdEIsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDO0lBQ3JCLHFCQUFxQixFQUFFLGNBQWM7SUFDckMseUJBQXlCLEVBQUUsa0JBQWtCO0lBQzdDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztDQUNsQyxDQUFDLENBQUE7QUFFRixNQUFNLGdCQUFnQixHQUFHLElBQUksbUNBQWdCLENBQUMsR0FBRyxFQUFFLGtCQUFrQixFQUFFO0lBQ3RFLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxpQkFBaUI7SUFDOUMsbUJBQW1CLEVBQUUsU0FBUyxDQUFDLG1CQUFtQjtJQUNsRCxjQUFjLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQztDQUN6QyxDQUFDLENBQUE7QUFFRixNQUFNLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsR0FBRyxFQUFFLGlCQUFpQixFQUFFO0lBQ3JELFFBQVEsRUFBRSxTQUFTLENBQUMsUUFBUTtJQUM1QixTQUFTLEVBQUUsYUFBYSxDQUFDLFNBQVM7SUFDbEMsWUFBWSxFQUFFLGFBQWEsQ0FBQyxZQUFZO0lBQ3hDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUztJQUNsQyxtQkFBbUIsRUFBRSxTQUFTLENBQUMsbUJBQW1CO0NBQ2xELENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJ1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJ1xuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi4vbGliL2F1dGhTdGFjaydcbmltcG9ydCB7IEZpbGVTdG9yYWdlU3RhY2sgfSBmcm9tICcuLi9saWIvZmlsZVN0b3JhZ2VTdGFjaydcbmltcG9ydCB7IERhdGFiYXNlU3RhY2sgfSBmcm9tICcuLi9saWIvZGF0YWJhc2VTdGFjaydcbmltcG9ydCB7IEFQSVN0YWNrIH0gZnJvbSAnLi4vbGliL2FwaVN0YWNrJ1xuXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpXG5cbmNvbnN0IGRhdGFiYXNlU3RhY2sgPSBuZXcgRGF0YWJhc2VTdGFjayhhcHAsICdEYXRhYmFzZVN0YWNrJywge30pXG5cbmNvbnN0IGF1dGhTdGFjayA9IG5ldyBBdXRoU3RhY2soYXBwLCAnQXV0aFN0YWNrJywge1xuXHRzdGFnZTogJ2RldicsXG5cdGhhc0NvZ25pdG9Hcm91cHM6IHRydWUsXG5cdGdyb3VwTmFtZXM6IFsnYWRtaW4nXSxcblx0dXNlcnBvb2xDb25zdHJ1Y3ROYW1lOiAnQ2hhdFVzZXJQb29sJyxcblx0aWRlbnRpdHlwb29sQ29uc3RydWN0TmFtZTogJ0NoYXRJZGVudGl0eVBvb2wnLFxuXHR1c2VyVGFibGU6IGRhdGFiYXNlU3RhY2sudXNlclRhYmxlLFxufSlcblxuY29uc3QgZmlsZVN0b3JhZ2VTdGFjayA9IG5ldyBGaWxlU3RvcmFnZVN0YWNrKGFwcCwgJ0ZpbGVTdG9yYWdlU3RhY2snLCB7XG5cdGF1dGhlbnRpY2F0ZWRSb2xlOiBhdXRoU3RhY2suYXV0aGVudGljYXRlZFJvbGUsXG5cdHVuYXV0aGVudGljYXRlZFJvbGU6IGF1dGhTdGFjay51bmF1dGhlbnRpY2F0ZWRSb2xlLFxuXHRhbGxvd2VkT3JpZ2luczogWydodHRwOi8vbG9jYWxob3N0OjMwMDAnXSxcbn0pXG5cbmNvbnN0IGFwaVN0YWNrID0gbmV3IEFQSVN0YWNrKGFwcCwgJ0FwcFN5bmNBUElTdGFjaycsIHtcblx0dXNlcnBvb2w6IGF1dGhTdGFjay51c2VycG9vbCxcblx0cm9vbVRhYmxlOiBkYXRhYmFzZVN0YWNrLnJvb21UYWJsZSxcblx0bWVzc2FnZVRhYmxlOiBkYXRhYmFzZVN0YWNrLm1lc3NhZ2VUYWJsZSxcblx0dXNlclRhYmxlOiBkYXRhYmFzZVN0YWNrLnVzZXJUYWJsZSxcblx0dW5hdXRoZW50aWNhdGVkUm9sZTogYXV0aFN0YWNrLnVuYXV0aGVudGljYXRlZFJvbGUsXG59KVxuIl19